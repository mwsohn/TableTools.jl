# FreqTools

A package that produces frequency tables and associated summary tables. It mostly is
a wrapper for the excellent `FreqTables.jl` package. `tab` is the main function. 

## Installation

```
  ] add https://github.com/mwsohn/TableTools.jl
```

## Syntax

tab(::AbstractDataFrame, vars::Union{String,Symbol}...; skipmissing = true, sort = nothing, summarize = nothing)

### Options:

skipmissing - set to `false` to include `missing` values in the frequency table

sort - set it to true to sort the output table by the order of frequency with the largest category on top. It can only be used in the one-way table

summarize - specify a "continuous" variable to produce means, standard deviations, and counts in a one-way or two-way tables

## Example
```
julia> using RDatasets

julia> lbw = dataset("COUNT","lbw");

julia> describe(lbw)
10×7 DataFrame
 Row │ variable  mean          min    median   max    nmissing  eltype   
     │ Symbol    Float64       Int64  Float64  Int64  Int64     DataType
─────┼───────────────────────────────────────────────────────────────────
   1 │ Low          0.312169       0      0.0      1         0  Int64
   2 │ Smoke        0.391534       0      0.0      1         0  Int64
   3 │ Race         1.84656        1      1.0      3         0  Int64
   4 │ Age         23.2381        14     23.0     45         0  Int64
   5 │ LWt        129.82          80    121.0    250         0  Int64
   6 │ PTL          0.195767       0      0.0      3         0  Int64
   7 │ Ht           0.0634921      0      0.0      1         0  Int64
   8 │ UI           0.148148       0      0.0      1         0  Int64
   9 │ FTV          0.793651       0      0.0      6         0  Int64
  10 │ BWt       2944.29         709   2977.0   4990         0  Int64
```

### 1. One-way frequency table

#### 1.a Frequencies
```
julia> tab(lbw, :Low)
───────┬───────────────────────────
   Low │ Counts   Percent  Cum Pct 
───────┼───────────────────────────
     0 │    130    68.783   68.783
     1 │     59    31.217  100.000
───────┼───────────────────────────
 Total │    189   100.000  100.000
───────┴───────────────────────────
```

#### 1.b Summarize birthweight by smoking status
```
julia> tab(lbw, :Smoke, summarize = :BWt)
───────┬────────────────────────
 Smoke │   N      Mean    StDev 
───────┼────────────────────────
     0 │ 115  3054.957  752.409
     1 │  74  2772.297  659.807
───────┼────────────────────────
 Total │ 189  2944.286  729.016
───────┴────────────────────────
```

### 2. Two-way frequency table

#### 2.a Frequency table with row, column, and cell percentages (default)
```
julia> tab(lbw, :Race, :Smoke)

──────────────┬───────────────────────────
 Race / Smoke │       0        1    Total 
──────────────┼───────────────────────────
            1 │      44       52       96
              │  45.833   54.167  100.000
              │  38.261   70.270   50.794
              │  23.280   27.513   50.794
──────────────┼───────────────────────────
            2 │      16       10       26
              │  61.538   38.462  100.000
              │  13.913   13.514   13.757
              │   8.466    5.291   13.757
──────────────┼───────────────────────────
            3 │      55       12       67
              │  82.090   17.910  100.000
              │  47.826   16.216   35.450
              │  29.101    6.349   35.450
──────────────┼───────────────────────────
        Total │     115       74      189
              │  60.847   39.153  100.000
              │ 100.000  100.000  100.000
              │  60.847   39.153  100.000
──────────────┴───────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```

#### 2.b Frequency table with no percentages
```
julia> tab(lbw, :Race, :Smoke, pct = nothing)
──────────────┬──────────────────────────
 Race / Smoke │       0       1    Total 
──────────────┼──────────────────────────
            1 │  44.000  52.000   96.000
──────────────┼──────────────────────────
            2 │  16.000  10.000   26.000
──────────────┼──────────────────────────
            3 │  55.000  12.000   67.000
──────────────┼──────────────────────────
        Total │ 115.000  74.000  189.000
──────────────┴──────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```

#### 2.c Frequency table with row percentages alone
```
julia> tab(lbw, :Race, :Smoke, pct = :r)
──────────────┬─────────────────────────
 Race / Smoke │      0       1    Total 
──────────────┼─────────────────────────
            1 │     44      52       96
              │ 45.833  54.167  100.000
──────────────┼─────────────────────────
            2 │     16      10       26
              │ 61.538  38.462  100.000
──────────────┼─────────────────────────
            3 │     55      12       67
              │ 82.090  17.910  100.000
──────────────┼─────────────────────────
        Total │    115      74      189
              │ 60.847  39.153  100.000
──────────────┴─────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```

#### 2.d Frequency table with column percentages alone
```
julia> tab(lbw, :Race, :Smoke, pct = :c)
──────────────┬───────────────────────────
 Race / Smoke │       0        1    Total 
──────────────┼───────────────────────────
            1 │      44       52       96
              │  38.261   70.270   50.794
──────────────┼───────────────────────────
            2 │      16       10       26
              │  13.913   13.514   13.757
──────────────┼───────────────────────────
            3 │      55       12       67
              │  47.826   16.216   35.450
──────────────┼───────────────────────────
        Total │     115       74      189
              │ 100.000  100.000  100.000
──────────────┴───────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```
#### 2.e Frequency table with cell percentages alone
```
julia> tab(lbw, :Race, :Smoke, pct = :e)
──────────────┬─────────────────────────
 Race / Smoke │      0       1    Total 
──────────────┼─────────────────────────
            1 │     44      52       96
              │ 23.280  27.513   50.794
──────────────┼─────────────────────────
            2 │     16      10       26
              │  8.466   5.291   13.757
──────────────┼─────────────────────────
            3 │     55      12       67
              │ 29.101   6.349   35.450
──────────────┼─────────────────────────
        Total │    115      74      189
              │ 60.847  39.153  100.000
──────────────┴─────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```

#### 2.e Frequency table with row and column percentages
```
julia> tab(lbw, :Race, :Smoke, pct = :rc)
──────────────┬───────────────────────────
 Race / Smoke │       0        1    Total 
──────────────┼───────────────────────────
            1 │      44       52       96
              │  45.833   54.167  100.000
              │  38.261   70.270   50.794
──────────────┼───────────────────────────
            2 │      16       10       26
              │  61.538   38.462  100.000
              │  13.913   13.514   13.757
──────────────┼───────────────────────────
            3 │      55       12       67
              │  82.090   17.910  100.000
              │  47.826   16.216   35.450
──────────────┼───────────────────────────
        Total │     115       74      189
              │  60.847   39.153  100.000
              │ 100.000  100.000  100.000
──────────────┴───────────────────────────
Pearson chi-square = 21.7790 (2), p < 0.0001
```

#### 2.f Frequency table with summary values (mean, standard deviation, and count) of another variable
```
julia> tab(lbw, :Race, :Smoke, summarize = :BWt)
──────────────┬──────────────────────────────
 Race / Smoke │        0         1     Total 
──────────────┼──────────────────────────────
            1 │ 3428.750  2827.385  3103.010
              │  710.099   626.684   727.872
              │       44        52        96
──────────────┼──────────────────────────────
            2 │ 2854.500  2504.000  2719.692
              │  621.254   637.057   638.684
              │       16        10        26
──────────────┼──────────────────────────────
            3 │ 2814.236  2757.167  2804.015
              │  708.261   810.045   721.301
              │       55        12        67
──────────────┼──────────────────────────────
        Total │ 3054.957  2772.297  2944.286
              │  752.409   659.807   729.016
              │      115        74       189
──────────────┴──────────────────────────────
```
### 3. Three-way frequency table

#### 3.a Frequency table
```
julia> tab(lbw, :Race, :Smoke, :UI)


UI = 0

──────────────┬───────────────────────────
 Race / Smoke │       0        1    Total 
──────────────┼───────────────────────────
            1 │      40       43       83
              │  48.193   51.807  100.000
              │  40.000   70.492   51.553
              │  24.845   26.708   51.553
──────────────┼───────────────────────────
            2 │      13       10       23
              │  56.522   43.478  100.000
              │  13.000   16.393   14.286
              │   8.075    6.211   14.286
──────────────┼───────────────────────────
            3 │      47        8       55
              │  85.455   14.545  100.000
              │  47.000   13.115   34.161
              │  29.193    4.969   34.161
──────────────┼───────────────────────────
        Total │     100       61      161
              │  62.112   37.888  100.000
              │ 100.000  100.000  100.000
              │  62.112   37.888  100.000
──────────────┴───────────────────────────
Pearson chi-square = 19.8732 (2), p < 0.0001


UI = 1

──────────────┬───────────────────────────
 Race / Smoke │       0        1    Total 
──────────────┼───────────────────────────
            1 │       4        9       13
              │  30.769   69.231  100.000
              │  26.667   69.231   46.429
              │  14.286   32.143   46.429
──────────────┼───────────────────────────
            2 │       3        0        3
              │ 100.000    0.000  100.000
              │  20.000    0.000   10.714
              │  10.714    0.000   10.714
──────────────┼───────────────────────────
            3 │       8        4       12
              │  66.667   33.333  100.000
              │  53.333   30.769   42.857
              │  28.571   14.286   42.857
──────────────┼───────────────────────────
        Total │      15       13       28
              │  53.571   46.429  100.000
              │ 100.000  100.000  100.000
              │  53.571   46.429  100.000
──────────────┴───────────────────────────
Pearson chi-square = 6.1449 (2), p = 0.0463075
```

#### 3.b Summarize birthweight (BWt) by three variables
```
julia> tab(lbw, :Race, :Smoke, :UI, summarize = :BWt)


UI = 0

──────────────┬──────────────────────────────
 Race / Smoke │        0         1     Total 
──────────────┼──────────────────────────────
            1 │ 3494.500  2874.163  3173.120
              │  622.518   634.652   698.474
              │       40        43        83
──────────────┼──────────────────────────────
            2 │ 3002.615  2504.000  2785.826
              │  583.831   637.057   644.843
              │       13        10        23
──────────────┼──────────────────────────────
            3 │ 2884.617  3104.750  2916.636
              │  700.495   407.027   667.539
              │       47         8        55
──────────────┼──────────────────────────────
        Total │ 3143.910  2843.721  3030.174
              │  711.463   625.409   693.696
              │      100        61       161
──────────────┴──────────────────────────────


UI = 1

──────────────┬──────────────────────────────
 Race / Smoke │        0         1     Total 
──────────────┼──────────────────────────────
            1 │ 2771.250  2603.889  2655.385
              │ 1247.209   566.666   780.654
              │        4         9        13
──────────────┼──────────────────────────────
            2 │ 2212.667         .  2212.667
              │  298.329         .   298.329
              │        3         0         3
──────────────┼──────────────────────────────
            3 │ 2400.750  2062.000  2287.833
              │  645.396  1026.103   761.602
              │        8         4        12
──────────────┼──────────────────────────────
        Total │ 2461.933  2437.154  2450.429
              │  772.723   738.281   742.977
              │       15        13        28
──────────────┴──────────────────────────────
```
